#!/usr/bin/env bash

# Print the remaining amount of energy stored in the battery identified by `BAT0`.  This
# is what works on my ThinkPad X220 and is probably not portable to other laptops without
# changes.
now=$(</sys/class/power_supply/BAT0/energy_now)
full=$(</sys/class/power_supply/BAT0/energy_full)
# http://mywiki.wooledge.org/ArithmeticExpression
percent=$((100 * now / full))
now=$(bc <<< "scale=1; $now / 1000000")
full=$(bc <<< "scale=1; $full / 1000000")
echo "$now Wh / $full Wh (${percent}%)"
